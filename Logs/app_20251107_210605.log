2025-11-07 21:06:05.814 +01:00 [INF] User profile is available. Using '/Users/jaraazad/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-11-07 21:06:06.324 +01:00 [INF] Applying migration '20251024065541_InitialCreate'.
2025-11-07 21:06:06.358 +01:00 [INF] Applying migration '20251101105657_AddIdentitySupport'.
2025-11-07 21:06:06.445 +01:00 [INF] Applying migration '20251103080324_UpdateNextQuestionSceneDeleteBehavior'.
2025-11-07 21:06:07.319 +01:00 [INF] Now listening on: https://localhost:7025
2025-11-07 21:06:07.320 +01:00 [INF] Now listening on: http://localhost:5262
2025-11-07 21:06:07.324 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-07 21:06:07.325 +01:00 [INF] Hosting environment: Development
2025-11-07 21:06:07.325 +01:00 [INF] Content root path: /Users/jaraazad/Desktop/Jam
2025-11-07 21:06:07.685 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/ - null null
2025-11-07 21:06:07.732 +01:00 [INF] Executing endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-07 21:06:07.740 +01:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller Jam.Controllers.HomeController (Jam).
2025-11-07 21:06:07.755 +01:00 [WRN] [HomeController -> Index] Auth cookie invalid or user no longer exists. Redirecting to login.
2025-11-07 21:06:07.760 +01:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-11-07 21:06:07.761 +01:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-11-07 21:06:07.761 +01:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-11-07 21:06:07.763 +01:00 [INF] Executing LocalRedirectResult, redirecting to /Identity/Account/Login.
2025-11-07 21:06:07.768 +01:00 [INF] Executed action Jam.Controllers.HomeController.Index (Jam) in 24.3802ms
2025-11-07 21:06:07.769 +01:00 [INF] Executed endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-07 21:06:07.777 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/ - 302 0 null 93.6519ms
2025-11-07 21:06:07.831 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/Identity/Account/Login - null null
2025-11-07 21:06:07.836 +01:00 [INF] Executing endpoint '/Account/Login'
2025-11-07 21:06:07.849 +01:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-11-07 21:06:07.860 +01:00 [INF] Executing handler method Jam.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-11-07 21:06:07.861 +01:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-11-07 21:06:07.862 +01:00 [INF] Executed handler method OnGetAsync, returned result .
2025-11-07 21:06:07.863 +01:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2025-11-07 21:06:07.863 +01:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-11-07 21:06:07.928 +01:00 [INF] Executed page /Account/Login in 79.4554ms
2025-11-07 21:06:07.929 +01:00 [INF] Executed endpoint '/Account/Login'
2025-11-07 21:06:07.930 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/Identity/Account/Login - 200 null text/html; charset=utf-8 98.5958ms
2025-11-07 21:06:08.180 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/lib/jquery-validation/dist/jquery.validate.min.js - null null
2025-11-07 21:06:08.183 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - null null
2025-11-07 21:06:08.191 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - 404 0 null 8.2102ms
2025-11-07 21:06:08.191 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/lib/jquery-validation/dist/jquery.validate.min.js - 404 0 null 11.351ms
2025-11-07 21:06:08.192 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7025/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js, Response status code: 404
2025-11-07 21:06:08.193 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7025/lib/jquery-validation/dist/jquery.validate.min.js, Response status code: 404
2025-11-07 21:06:08.837 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7025/Identity/Account/Login - application/x-www-form-urlencoded 236
2025-11-07 21:06:08.842 +01:00 [INF] Executing endpoint '/Account/Login'
2025-11-07 21:06:08.843 +01:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-11-07 21:06:08.861 +01:00 [INF] Executing handler method Jam.Areas.Identity.Pages.Account.LoginModel.OnPostAsync - ModelState is "Valid"
2025-11-07 21:06:08.992 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-11-07 21:06:08.993 +01:00 [INF] User logged in.
2025-11-07 21:06:08.994 +01:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2025-11-07 21:06:08.994 +01:00 [INF] Executing LocalRedirectResult, redirecting to /.
2025-11-07 21:06:08.994 +01:00 [INF] Executed page /Account/Login in 150.7765ms
2025-11-07 21:06:08.994 +01:00 [INF] Executed endpoint '/Account/Login'
2025-11-07 21:06:08.994 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7025/Identity/Account/Login - 302 0 null 157.471ms
2025-11-07 21:06:09.021 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/ - null null
2025-11-07 21:06:09.022 +01:00 [INF] Executing endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-07 21:06:09.023 +01:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller Jam.Controllers.HomeController (Jam).
2025-11-07 21:06:09.078 +01:00 [INF] Executing ViewResult, running view Index.
2025-11-07 21:06:09.096 +01:00 [INF] Executed ViewResult - view Index executed in 18.7155ms.
2025-11-07 21:06:09.126 +01:00 [INF] Executed action Jam.Controllers.HomeController.Index (Jam) in 103.6195ms
2025-11-07 21:06:09.129 +01:00 [INF] Executed endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-07 21:06:09.137 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/ - 200 null text/html; charset=utf-8 115.7877ms
2025-11-07 21:06:10.055 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditStory?storyId=1 - null null
2025-11-07 21:06:10.063 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditStory (Jam)'
2025-11-07 21:06:10.070 +01:00 [INF] Route matched with {action = "EditStory", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditStory(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-07 21:06:10.092 +01:00 [INF] Executing ViewResult, running view EditStory.
2025-11-07 21:06:10.173 +01:00 [INF] Executed ViewResult - view EditStory executed in 82.284ms.
2025-11-07 21:06:10.199 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditStory (Jam) in 129.5354ms
2025-11-07 21:06:10.200 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditStory (Jam)'
2025-11-07 21:06:10.200 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditStory?storyId=1 - 200 null text/html; charset=utf-8 145.4149ms
2025-11-07 21:06:10.769 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - null null
2025-11-07 21:06:10.771 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:10.773 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-07 21:06:10.869 +01:00 [INF] Executing ViewResult, running view EditQuestionScenes.
2025-11-07 21:06:11.045 +01:00 [INF] Executed ViewResult - view EditQuestionScenes executed in 176.6811ms.
2025-11-07 21:06:11.045 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 271.842ms
2025-11-07 21:06:11.045 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:11.046 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - 200 null text/html; charset=utf-8 276.8023ms
2025-11-07 21:06:12.772 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/GetEditQuestionScenePartial?index=4&questionNumber=5 - null null
2025-11-07 21:06:12.798 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.GetEditQuestionScenePartial (Jam)'
2025-11-07 21:06:12.802 +01:00 [INF] Route matched with {action = "GetEditQuestionScenePartial", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetEditQuestionScenePartial(Int32, Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-07 21:06:12.808 +01:00 [INF] Executing PartialViewResult, running view ~/Views/Shared/_EditQuestionScenePartial.cshtml.
2025-11-07 21:06:12.832 +01:00 [INF] Executed PartialViewResult - view ~/Views/Shared/_EditQuestionScenePartial.cshtml executed in 25.4742ms.
2025-11-07 21:06:12.832 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.GetEditQuestionScenePartial (Jam) in 30.0052ms
2025-11-07 21:06:12.832 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.GetEditQuestionScenePartial (Jam)'
2025-11-07 21:06:12.833 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/GetEditQuestionScenePartial?index=4&questionNumber=5 - 200 null text/html; charset=utf-8 61.0437ms
2025-11-07 21:06:14.746 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7025/StoryEditing/EditQuestionScenes - application/x-www-form-urlencoded 6835
2025-11-07 21:06:14.751 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:14.761 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(Int32, System.Collections.Generic.List`1[Jam.ViewModels.QuestionSceneBaseViewModel], System.String) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-07 21:06:14.778 +01:00 [INF] Executing ViewResult, running view EditQuestionScenes.
2025-11-07 21:06:15.048 +01:00 [INF] Executed ViewResult - view EditQuestionScenes executed in 269.5487ms.
2025-11-07 21:06:15.048 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 286.8238ms
2025-11-07 21:06:15.048 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:15.048 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7025/StoryEditing/EditQuestionScenes - 200 null text/html; charset=utf-8 302.5157ms
2025-11-07 21:06:17.754 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - null null
2025-11-07 21:06:17.805 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:17.805 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-07 21:06:17.823 +01:00 [INF] Executing ViewResult, running view EditQuestionScenes.
2025-11-07 21:06:17.989 +01:00 [INF] Executed ViewResult - view EditQuestionScenes executed in 140.4659ms.
2025-11-07 21:06:18.058 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 251.7914ms
2025-11-07 21:06:18.058 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:18.058 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - 200 null text/html; charset=utf-8 304.1616ms
2025-11-07 21:06:21.528 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7025/StoryEditing/EditQuestionScenes - application/x-www-form-urlencoded 5439
2025-11-07 21:06:21.530 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:21.530 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(Int32, System.Collections.Generic.List`1[Jam.ViewModels.QuestionSceneBaseViewModel], System.String) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-07 21:06:21.631 +01:00 [INF] [ðŸ”¹SceneRepository -> UpdateQuestionScenes] Endringer lagret for storyId=1. ðŸ”¹Added=0, Updated=3, Deleted=1
2025-11-07 21:06:21.633 +01:00 [INF] Executing RedirectResult, redirecting to /StoryEditing/EditQuestionScenes?storyId=1.
2025-11-07 21:06:21.633 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 102.4622ms
2025-11-07 21:06:21.633 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:21.633 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7025/StoryEditing/EditQuestionScenes - 302 0 null 104.6804ms
2025-11-07 21:06:21.687 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - null null
2025-11-07 21:06:21.687 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:21.687 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-07 21:06:21.692 +01:00 [INF] Executing ViewResult, running view EditQuestionScenes.
2025-11-07 21:06:21.814 +01:00 [INF] Executed ViewResult - view EditQuestionScenes executed in 121.9875ms.
2025-11-07 21:06:21.814 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 126.3249ms
2025-11-07 21:06:21.814 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:21.814 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - 200 null text/html; charset=utf-8 127.6867ms
2025-11-07 21:06:25.574 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/ - null null
2025-11-07 21:06:25.576 +01:00 [INF] Executing endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-07 21:06:25.577 +01:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller Jam.Controllers.HomeController (Jam).
2025-11-07 21:06:25.590 +01:00 [INF] Executing ViewResult, running view Index.
2025-11-07 21:06:25.596 +01:00 [INF] Executed ViewResult - view Index executed in 5.3255ms.
2025-11-07 21:06:25.597 +01:00 [INF] Executed action Jam.Controllers.HomeController.Index (Jam) in 20.2066ms
2025-11-07 21:06:25.597 +01:00 [INF] Executed endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-07 21:06:25.599 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/ - 200 null text/html; charset=utf-8 25.304ms
2025-11-07 21:06:26.823 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditStory?storyId=1 - null null
2025-11-07 21:06:26.826 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditStory (Jam)'
2025-11-07 21:06:26.826 +01:00 [INF] Route matched with {action = "EditStory", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditStory(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-07 21:06:26.830 +01:00 [INF] Executing ViewResult, running view EditStory.
2025-11-07 21:06:26.834 +01:00 [INF] Executed ViewResult - view EditStory executed in 3.6752ms.
2025-11-07 21:06:26.835 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditStory (Jam) in 8.058ms
2025-11-07 21:06:26.835 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditStory (Jam)'
2025-11-07 21:06:26.836 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditStory?storyId=1 - 200 null text/html; charset=utf-8 13.0026ms
2025-11-07 21:06:27.872 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - null null
2025-11-07 21:06:27.873 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:27.873 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-07 21:06:27.883 +01:00 [INF] Executing ViewResult, running view EditQuestionScenes.
2025-11-07 21:06:27.998 +01:00 [INF] Executed ViewResult - view EditQuestionScenes executed in 114.6219ms.
2025-11-07 21:06:28.020 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 146.784ms
2025-11-07 21:06:28.020 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:28.020 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - 200 null text/html; charset=utf-8 148.5305ms
2025-11-07 21:06:29.777 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/GetEditQuestionScenePartial?index=3&questionNumber=4 - null null
2025-11-07 21:06:29.779 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.GetEditQuestionScenePartial (Jam)'
2025-11-07 21:06:29.779 +01:00 [INF] Route matched with {action = "GetEditQuestionScenePartial", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetEditQuestionScenePartial(Int32, Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-07 21:06:29.780 +01:00 [INF] Executing PartialViewResult, running view ~/Views/Shared/_EditQuestionScenePartial.cshtml.
2025-11-07 21:06:29.842 +01:00 [INF] Executed PartialViewResult - view ~/Views/Shared/_EditQuestionScenePartial.cshtml executed in 36.7962ms.
2025-11-07 21:06:29.890 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.GetEditQuestionScenePartial (Jam) in 88.9901ms
2025-11-07 21:06:29.915 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.GetEditQuestionScenePartial (Jam)'
2025-11-07 21:06:29.916 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/GetEditQuestionScenePartial?index=3&questionNumber=4 - 200 null text/html; charset=utf-8 164.7104ms
2025-11-07 21:06:38.320 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7025/StoryEditing/EditQuestionScenes - application/x-www-form-urlencoded 5806
2025-11-07 21:06:38.346 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:38.346 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(Int32, System.Collections.Generic.List`1[Jam.ViewModels.QuestionSceneBaseViewModel], System.String) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-07 21:06:38.379 +01:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 2), @p2='?' (Size = 2), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "QuestionScenes" ("NextQuestionSceneId", "Question", "SceneText", "StoryId")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "QuestionSceneId";
2025-11-07 21:06:38.409 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'Jam.DAL.StoryDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-07 21:06:38.511 +01:00 [ERR] [ðŸ”¹SceneRepository -> UpdateQuestionScenes] Error updating QuestionScenes
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Jam.DAL.SceneDAL.SceneRepository.UpdateQuestionScenes(IEnumerable`1 questionScenes) in /Users/jaraazad/Desktop/Jam/DAL/SceneDAL/SceneRepository.cs:line 431
2025-11-07 21:06:38.513 +01:00 [INF] Executing RedirectResult, redirecting to /StoryEditing/EditQuestionScenes?storyId=1.
2025-11-07 21:06:38.513 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 166.84ms
2025-11-07 21:06:38.513 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:38.513 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7025/StoryEditing/EditQuestionScenes - 302 0 null 192.9698ms
2025-11-07 21:06:38.516 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - null null
2025-11-07 21:06:38.517 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:38.517 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-07 21:06:38.520 +01:00 [INF] Executing ViewResult, running view EditQuestionScenes.
2025-11-07 21:06:38.563 +01:00 [INF] Executed ViewResult - view EditQuestionScenes executed in 43.175ms.
2025-11-07 21:06:38.589 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 71.5282ms
2025-11-07 21:06:38.589 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:38.589 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - 200 null text/html; charset=utf-8 72.6258ms
2025-11-07 21:06:39.953 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/ - null null
2025-11-07 21:06:40.004 +01:00 [INF] Executing endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-07 21:06:40.005 +01:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller Jam.Controllers.HomeController (Jam).
2025-11-07 21:06:40.018 +01:00 [INF] Executing ViewResult, running view Index.
2025-11-07 21:06:40.069 +01:00 [INF] Executed ViewResult - view Index executed in 28.452ms.
2025-11-07 21:06:40.095 +01:00 [INF] Executed action Jam.Controllers.HomeController.Index (Jam) in 90.6784ms
2025-11-07 21:06:40.096 +01:00 [INF] Executed endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-07 21:06:40.096 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/ - 200 null text/html; charset=utf-8 143.0121ms
2025-11-07 21:06:42.240 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditStory?storyId=1 - null null
2025-11-07 21:06:42.263 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditStory (Jam)'
2025-11-07 21:06:42.264 +01:00 [INF] Route matched with {action = "EditStory", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditStory(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-07 21:06:42.268 +01:00 [INF] Executing ViewResult, running view EditStory.
2025-11-07 21:06:42.294 +01:00 [INF] Executed ViewResult - view EditStory executed in 25.1958ms.
2025-11-07 21:06:42.340 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditStory (Jam) in 76.6425ms
2025-11-07 21:06:42.363 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditStory (Jam)'
2025-11-07 21:06:42.363 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditStory?storyId=1 - 200 null text/html; charset=utf-8 123.1215ms
2025-11-07 21:06:43.249 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - null null
2025-11-07 21:06:43.250 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:43.251 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-07 21:06:43.263 +01:00 [INF] Executing ViewResult, running view EditQuestionScenes.
2025-11-07 21:06:43.423 +01:00 [INF] Executed ViewResult - view EditQuestionScenes executed in 160.0888ms.
2025-11-07 21:06:43.469 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 218.5465ms
2025-11-07 21:06:43.469 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-07 21:06:43.470 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - 200 null text/html; charset=utf-8 246.296ms
2025-11-07 21:07:04.662 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/GetEditQuestionScenePartial?index=3&questionNumber=4 - null null
2025-11-07 21:07:04.668 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.GetEditQuestionScenePartial (Jam)'
2025-11-07 21:07:04.669 +01:00 [INF] Route matched with {action = "GetEditQuestionScenePartial", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetEditQuestionScenePartial(Int32, Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-07 21:07:04.671 +01:00 [INF] Executing PartialViewResult, running view ~/Views/Shared/_EditQuestionScenePartial.cshtml.
2025-11-07 21:07:04.690 +01:00 [INF] Executed PartialViewResult - view ~/Views/Shared/_EditQuestionScenePartial.cshtml executed in 19.255ms.
2025-11-07 21:07:04.741 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.GetEditQuestionScenePartial (Jam) in 71.7498ms
2025-11-07 21:07:04.742 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.GetEditQuestionScenePartial (Jam)'
2025-11-07 21:07:04.768 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/GetEditQuestionScenePartial?index=3&questionNumber=4 - 200 null text/html; charset=utf-8 131.8185ms
