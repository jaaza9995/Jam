2025-11-06 20:09:54.466 +01:00 [INF] User profile is available. Using '/Users/jaraazad/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-11-06 20:09:55.290 +01:00 [INF] Applying migration '20251024065541_InitialCreate'.
2025-11-06 20:09:55.390 +01:00 [INF] Applying migration '20251101105657_AddIdentitySupport'.
2025-11-06 20:09:55.604 +01:00 [INF] Applying migration '20251103080324_UpdateNextQuestionSceneDeleteBehavior'.
2025-11-06 20:09:56.971 +01:00 [INF] Now listening on: https://localhost:7025
2025-11-06 20:09:56.971 +01:00 [INF] Now listening on: http://localhost:5262
2025-11-06 20:09:56.976 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-06 20:09:56.977 +01:00 [INF] Hosting environment: Development
2025-11-06 20:09:56.977 +01:00 [INF] Content root path: /Users/jaraazad/Desktop/Jam
2025-11-06 20:09:57.490 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/ - null null
2025-11-06 20:09:57.525 +01:00 [INF] Executing endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-06 20:09:57.533 +01:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller Jam.Controllers.HomeController (Jam).
2025-11-06 20:09:57.546 +01:00 [WRN] [HomeController -> Index] Auth cookie invalid or user no longer exists. Redirecting to login.
2025-11-06 20:09:57.549 +01:00 [INF] AuthenticationScheme: Identity.Application signed out.
2025-11-06 20:09:57.551 +01:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-11-06 20:09:57.551 +01:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2025-11-06 20:09:57.552 +01:00 [INF] Executing LocalRedirectResult, redirecting to /Identity/Account/Login.
2025-11-06 20:09:57.554 +01:00 [INF] Executed action Jam.Controllers.HomeController.Index (Jam) in 19.7219ms
2025-11-06 20:09:57.555 +01:00 [INF] Executed endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-06 20:09:57.558 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/ - 302 0 null 69.4395ms
2025-11-06 20:09:57.572 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/Identity/Account/Login - null null
2025-11-06 20:09:57.624 +01:00 [INF] Executing endpoint '/Account/Login'
2025-11-06 20:09:57.637 +01:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-11-06 20:09:57.645 +01:00 [INF] Executing handler method Jam.Areas.Identity.Pages.Account.LoginModel.OnGetAsync - ModelState is "Valid"
2025-11-06 20:09:57.646 +01:00 [INF] AuthenticationScheme: Identity.External signed out.
2025-11-06 20:09:57.647 +01:00 [INF] Executed handler method OnGetAsync, returned result .
2025-11-06 20:09:57.648 +01:00 [INF] Executing an implicit handler method - ModelState is "Invalid"
2025-11-06 20:09:57.649 +01:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2025-11-06 20:09:57.714 +01:00 [INF] Executed page /Account/Login in 76.4024ms
2025-11-06 20:09:57.714 +01:00 [INF] Executed endpoint '/Account/Login'
2025-11-06 20:09:57.715 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/Identity/Account/Login - 200 null text/html; charset=utf-8 142.4895ms
2025-11-06 20:09:57.744 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/lib/jquery-validation/dist/jquery.validate.min.js - null null
2025-11-06 20:09:57.750 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - null null
2025-11-06 20:09:57.778 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - 404 0 null 27.7621ms
2025-11-06 20:09:57.778 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/lib/jquery-validation/dist/jquery.validate.min.js - 404 0 null 33.7041ms
2025-11-06 20:09:57.778 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7025/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js, Response status code: 404
2025-11-06 20:09:57.778 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7025/lib/jquery-validation/dist/jquery.validate.min.js, Response status code: 404
2025-11-06 20:09:59.582 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7025/Identity/Account/Login - application/x-www-form-urlencoded 236
2025-11-06 20:09:59.589 +01:00 [INF] Executing endpoint '/Account/Login'
2025-11-06 20:09:59.591 +01:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2025-11-06 20:09:59.620 +01:00 [INF] Executing handler method Jam.Areas.Identity.Pages.Account.LoginModel.OnPostAsync - ModelState is "Valid"
2025-11-06 20:09:59.745 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2025-11-06 20:09:59.746 +01:00 [INF] User logged in.
2025-11-06 20:09:59.747 +01:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2025-11-06 20:09:59.747 +01:00 [INF] Executing LocalRedirectResult, redirecting to /.
2025-11-06 20:09:59.747 +01:00 [INF] Executed page /Account/Login in 156.7821ms
2025-11-06 20:09:59.747 +01:00 [INF] Executed endpoint '/Account/Login'
2025-11-06 20:09:59.748 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7025/Identity/Account/Login - 302 0 null 166.4907ms
2025-11-06 20:09:59.751 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/ - null null
2025-11-06 20:09:59.753 +01:00 [INF] Executing endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-06 20:09:59.753 +01:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller Jam.Controllers.HomeController (Jam).
2025-11-06 20:09:59.802 +01:00 [INF] Executing ViewResult, running view Index.
2025-11-06 20:09:59.820 +01:00 [INF] Executed ViewResult - view Index executed in 19.0151ms.
2025-11-06 20:09:59.823 +01:00 [INF] Executed action Jam.Controllers.HomeController.Index (Jam) in 70.4728ms
2025-11-06 20:09:59.825 +01:00 [INF] Executed endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-06 20:09:59.831 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/ - 200 null text/html; charset=utf-8 79.7824ms
2025-11-06 20:10:02.633 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditStory?storyId=1 - null null
2025-11-06 20:10:02.672 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditStory (Jam)'
2025-11-06 20:10:02.678 +01:00 [INF] Route matched with {action = "EditStory", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditStory(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-06 20:10:02.697 +01:00 [INF] Executing ViewResult, running view EditStory.
2025-11-06 20:10:02.736 +01:00 [INF] Executed ViewResult - view EditStory executed in 40.2562ms.
2025-11-06 20:10:02.787 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditStory (Jam) in 109.7145ms
2025-11-06 20:10:02.788 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditStory (Jam)'
2025-11-06 20:10:02.788 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditStory?storyId=1 - 200 null text/html; charset=utf-8 155.4668ms
2025-11-06 20:10:03.534 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - null null
2025-11-06 20:10:03.537 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-06 20:10:03.543 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-06 20:10:03.615 +01:00 [INF] Executing ViewResult, running view EditQuestionScenes.
2025-11-06 20:10:03.719 +01:00 [INF] Executed ViewResult - view EditQuestionScenes executed in 104.5847ms.
2025-11-06 20:10:03.719 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 176.2162ms
2025-11-06 20:10:03.719 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-06 20:10:03.720 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - 200 null text/html; charset=utf-8 210.8979ms
2025-11-06 20:10:06.262 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7025/StoryEditing/DeleteQuestion?storyId=1&questionSceneId=3 - application/x-www-form-urlencoded 225
2025-11-06 20:10:06.268 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.DeleteQuestion (Jam)'
2025-11-06 20:10:06.274 +01:00 [INF] Route matched with {action = "DeleteQuestion", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteQuestion(Int32, Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-06 20:10:06.367 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'Jam.DAL.StoryDbContext'.
System.InvalidOperationException: Unable to save changes because a circular dependency was detected in the data to be saved: 'QuestionScene [Modified] ForeignKeyConstraint { 'NextQuestionSceneId' } <-
QuestionScene [Deleted] Index { 'NextQuestionSceneId' } <-
QuestionScene [Modified]To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.'.
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.ThrowCycle(List`1 cycle, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.TopologicalSortCore(Boolean withBatching, Func`4 canBreakEdges, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.BatchingTopologicalSort(Func`4 canBreakEdges, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.TopologicalSort(IEnumerable`1 commands)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.BatchCommands(IList`1 entries, IUpdateAdapter updateAdapter)+MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: Unable to save changes because a circular dependency was detected in the data to be saved: 'QuestionScene [Modified] ForeignKeyConstraint { 'NextQuestionSceneId' } <-
QuestionScene [Deleted] Index { 'NextQuestionSceneId' } <-
QuestionScene [Modified]To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.'.
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.ThrowCycle(List`1 cycle, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.TopologicalSortCore(Boolean withBatching, Func`4 canBreakEdges, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.BatchingTopologicalSort(Func`4 canBreakEdges, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.TopologicalSort(IEnumerable`1 commands)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.BatchCommands(IList`1 entries, IUpdateAdapter updateAdapter)+MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-06 20:10:06.431 +01:00 [ERR] [SceneRepository -> DeleteQuestionScene] Error deleting scene 3
System.InvalidOperationException: Unable to save changes because a circular dependency was detected in the data to be saved: 'QuestionScene [Modified] ForeignKeyConstraint { 'NextQuestionSceneId' } <-
QuestionScene [Deleted] Index { 'NextQuestionSceneId' } <-
QuestionScene [Modified]To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.'.
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.ThrowCycle(List`1 cycle, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.TopologicalSortCore(Boolean withBatching, Func`4 canBreakEdges, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.BatchingTopologicalSort(Func`4 canBreakEdges, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.TopologicalSort(IEnumerable`1 commands)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.BatchCommands(IList`1 entries, IUpdateAdapter updateAdapter)+MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Jam.DAL.SceneDAL.SceneRepository.DeleteQuestionScene(Int32 questionSceneId, Nullable`1 previousSceneId) in /Users/jaraazad/Desktop/Jam/DAL/SceneDAL/SceneRepository.cs:line 452
2025-11-06 20:10:06.432 +01:00 [INF] Executing RedirectResult, redirecting to /StoryEditing/EditQuestionScenes?storyId=1.
2025-11-06 20:10:06.433 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.DeleteQuestion (Jam) in 158.8185ms
2025-11-06 20:10:06.433 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.DeleteQuestion (Jam)'
2025-11-06 20:10:06.433 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7025/StoryEditing/DeleteQuestion?storyId=1&questionSceneId=3 - 302 0 null 170.907ms
2025-11-06 20:10:06.442 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - null null
2025-11-06 20:10:06.467 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-06 20:10:06.468 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-06 20:10:06.472 +01:00 [INF] Executing ViewResult, running view EditQuestionScenes.
2025-11-06 20:10:06.610 +01:00 [INF] Executed ViewResult - view EditQuestionScenes executed in 138.2867ms.
2025-11-06 20:10:06.610 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 142.3924ms
2025-11-06 20:10:06.610 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-06 20:10:06.610 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - 200 null text/html; charset=utf-8 168.5359ms
2025-11-06 20:10:11.755 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7025/StoryEditing/DeleteQuestion?storyId=1&questionSceneId=1 - application/x-www-form-urlencoded 225
2025-11-06 20:10:11.859 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.DeleteQuestion (Jam)'
2025-11-06 20:10:11.859 +01:00 [INF] Route matched with {action = "DeleteQuestion", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteQuestion(Int32, Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-06 20:10:11.889 +01:00 [INF] [SceneRepository -> DeleteQuestionScene] Deleted scene 1, linked previous=2 â†’ next=null
2025-11-06 20:10:11.890 +01:00 [INF] Executing RedirectResult, redirecting to /StoryEditing/EditQuestionScenes?storyId=1.
2025-11-06 20:10:11.890 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.DeleteQuestion (Jam) in 30.9694ms
2025-11-06 20:10:11.890 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.DeleteQuestion (Jam)'
2025-11-06 20:10:11.891 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7025/StoryEditing/DeleteQuestion?storyId=1&questionSceneId=1 - 302 0 null 135.4103ms
2025-11-06 20:10:11.927 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - null null
2025-11-06 20:10:11.927 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-06 20:10:11.928 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-06 20:10:11.934 +01:00 [INF] Executing ViewResult, running view EditQuestionScenes.
2025-11-06 20:10:12.048 +01:00 [INF] Executed ViewResult - view EditQuestionScenes executed in 113.6197ms.
2025-11-06 20:10:12.073 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 145.4475ms
2025-11-06 20:10:12.096 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-06 20:10:12.096 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - 200 null text/html; charset=utf-8 170.0867ms
2025-11-06 20:10:15.077 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7025/StoryEditing/EditQuestionScenes - application/x-www-form-urlencoded 5417
2025-11-06 20:10:15.102 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-06 20:10:15.108 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(System.Collections.Generic.List`1[Jam.ViewModels.QuestionSceneBaseViewModel]) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-06 20:10:15.184 +01:00 [INF] Executing RedirectResult, redirecting to /StoryEditing/EditStory?storyId=1.
2025-11-06 20:10:15.184 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 75.5926ms
2025-11-06 20:10:15.184 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-06 20:10:15.184 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7025/StoryEditing/EditQuestionScenes - 302 0 null 108.1354ms
2025-11-06 20:10:15.189 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditStory?storyId=1 - null null
2025-11-06 20:10:15.190 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditStory (Jam)'
2025-11-06 20:10:15.190 +01:00 [INF] Route matched with {action = "EditStory", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditStory(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-06 20:10:15.192 +01:00 [INF] Executing ViewResult, running view EditStory.
2025-11-06 20:10:15.216 +01:00 [INF] Executed ViewResult - view EditStory executed in 23.9396ms.
2025-11-06 20:10:15.241 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditStory (Jam) in 50.9577ms
2025-11-06 20:10:15.267 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditStory (Jam)'
2025-11-06 20:10:15.267 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditStory?storyId=1 - 200 null text/html; charset=utf-8 77.5025ms
2025-11-06 20:10:16.067 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - null null
2025-11-06 20:10:16.094 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-06 20:10:16.095 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-06 20:10:16.104 +01:00 [INF] Executing ViewResult, running view EditQuestionScenes.
2025-11-06 20:10:16.172 +01:00 [INF] Executed ViewResult - view EditQuestionScenes executed in 67.9445ms.
2025-11-06 20:10:16.173 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 77.8515ms
2025-11-06 20:10:16.173 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-06 20:10:16.173 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=1 - 200 null text/html; charset=utf-8 105.8584ms
2025-11-06 20:10:55.321 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/ - null null
2025-11-06 20:10:55.331 +01:00 [INF] Executing endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-06 20:10:55.332 +01:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller Jam.Controllers.HomeController (Jam).
2025-11-06 20:10:55.349 +01:00 [INF] Executing ViewResult, running view Index.
2025-11-06 20:10:55.424 +01:00 [INF] Executed ViewResult - view Index executed in 75.1541ms.
2025-11-06 20:10:55.425 +01:00 [INF] Executed action Jam.Controllers.HomeController.Index (Jam) in 93.6892ms
2025-11-06 20:10:55.426 +01:00 [INF] Executed endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-06 20:10:55.426 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/ - 200 null text/html; charset=utf-8 105.0529ms
2025-11-06 20:10:56.479 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryCreation/CreateStoryAndIntro - null null
2025-11-06 20:10:56.506 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryCreationController.CreateStoryAndIntro (Jam)'
2025-11-06 20:10:56.509 +01:00 [INF] Route matched with {action = "CreateStoryAndIntro", controller = "StoryCreation", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateStoryAndIntro() on controller Jam.Controllers.StoryCreationController (Jam).
2025-11-06 20:10:56.512 +01:00 [INF] Accessing expired session, Key:2d0cc344-df3d-072e-4af7-3508e4f5cd8c
2025-11-06 20:10:56.518 +01:00 [INF] Executing ViewResult, running view CreateStoryAndIntro.
2025-11-06 20:10:56.542 +01:00 [INF] Executed ViewResult - view CreateStoryAndIntro executed in 25.0308ms.
2025-11-06 20:10:56.543 +01:00 [INF] Executed action Jam.Controllers.StoryCreationController.CreateStoryAndIntro (Jam) in 33.7225ms
2025-11-06 20:10:56.543 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryCreationController.CreateStoryAndIntro (Jam)'
2025-11-06 20:10:56.543 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryCreation/CreateStoryAndIntro - 200 null text/html; charset=utf-8 89.624ms
2025-11-06 20:10:59.481 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7025/StoryCreation/CreateStoryAndIntro - application/x-www-form-urlencoded 304
2025-11-06 20:10:59.534 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryCreationController.CreateStoryAndIntro (Jam)'
2025-11-06 20:10:59.541 +01:00 [INF] Route matched with {action = "CreateStoryAndIntro", controller = "StoryCreation", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateStoryAndIntro(Jam.ViewModels.StoryCreation.CreateStoryAndIntroViewModel) on controller Jam.Controllers.StoryCreationController (Jam).
2025-11-06 20:10:59.548 +01:00 [INF] Accessing expired session, Key:2d0cc344-df3d-072e-4af7-3508e4f5cd8c
2025-11-06 20:10:59.578 +01:00 [INF] Executing RedirectResult, redirecting to /StoryCreation/CreateQuestionScenes.
2025-11-06 20:10:59.579 +01:00 [INF] Executed action Jam.Controllers.StoryCreationController.CreateStoryAndIntro (Jam) in 37.709ms
2025-11-06 20:10:59.579 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryCreationController.CreateStoryAndIntro (Jam)'
2025-11-06 20:10:59.579 +01:00 [INF] Session started; Key:2d0cc344-df3d-072e-4af7-3508e4f5cd8c, Id:b7484396-2ef2-4300-e48f-506658bb47f7
2025-11-06 20:10:59.579 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7025/StoryCreation/CreateStoryAndIntro - 302 0 null 98.3471ms
2025-11-06 20:10:59.584 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryCreation/CreateQuestionScenes - null null
2025-11-06 20:10:59.585 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryCreationController.CreateQuestionScenes (Jam)'
2025-11-06 20:10:59.586 +01:00 [INF] Route matched with {action = "CreateQuestionScenes", controller = "StoryCreation", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateQuestionScenes() on controller Jam.Controllers.StoryCreationController (Jam).
2025-11-06 20:10:59.591 +01:00 [INF] Executing ViewResult, running view CreateQuestionScenes.
2025-11-06 20:10:59.677 +01:00 [INF] Executed ViewResult - view CreateQuestionScenes executed in 86.8708ms.
2025-11-06 20:10:59.702 +01:00 [INF] Executed action Jam.Controllers.StoryCreationController.CreateQuestionScenes (Jam) in 115.846ms
2025-11-06 20:10:59.703 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryCreationController.CreateQuestionScenes (Jam)'
2025-11-06 20:10:59.704 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryCreation/CreateQuestionScenes - 200 null text/html; charset=utf-8 119.5035ms
2025-11-06 20:11:09.163 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryCreation/GetQuestionScenePartial?index=1 - null null
2025-11-06 20:11:09.169 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryCreationController.GetQuestionScenePartial (Jam)'
2025-11-06 20:11:09.174 +01:00 [INF] Route matched with {action = "GetQuestionScenePartial", controller = "StoryCreation", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetQuestionScenePartial(Int32) on controller Jam.Controllers.StoryCreationController (Jam).
2025-11-06 20:11:09.178 +01:00 [INF] Executing PartialViewResult, running view _QuestionScenePartial.
2025-11-06 20:11:09.188 +01:00 [INF] Executed PartialViewResult - view _QuestionScenePartial executed in 10.3072ms.
2025-11-06 20:11:09.188 +01:00 [INF] Executed action Jam.Controllers.StoryCreationController.GetQuestionScenePartial (Jam) in 13.8817ms
2025-11-06 20:11:09.188 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryCreationController.GetQuestionScenePartial (Jam)'
2025-11-06 20:11:09.188 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryCreation/GetQuestionScenePartial?index=1 - 200 null text/html; charset=utf-8 49.7488ms
2025-11-06 20:11:17.003 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryCreation/GetQuestionScenePartial?index=2 - null null
2025-11-06 20:11:17.005 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryCreationController.GetQuestionScenePartial (Jam)'
2025-11-06 20:11:17.005 +01:00 [INF] Route matched with {action = "GetQuestionScenePartial", controller = "StoryCreation", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetQuestionScenePartial(Int32) on controller Jam.Controllers.StoryCreationController (Jam).
2025-11-06 20:11:17.006 +01:00 [INF] Executing PartialViewResult, running view _QuestionScenePartial.
2025-11-06 20:11:17.042 +01:00 [INF] Executed PartialViewResult - view _QuestionScenePartial executed in 35.876ms.
2025-11-06 20:11:17.093 +01:00 [INF] Executed action Jam.Controllers.StoryCreationController.GetQuestionScenePartial (Jam) in 62.8038ms
2025-11-06 20:11:17.169 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryCreationController.GetQuestionScenePartial (Jam)'
2025-11-06 20:11:17.170 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryCreation/GetQuestionScenePartial?index=2 - 200 null text/html; charset=utf-8 167.1561ms
2025-11-06 20:11:32.572 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7025/StoryCreation/CreateQuestionScenes - application/x-www-form-urlencoded 2010
2025-11-06 20:11:32.577 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryCreationController.CreateQuestionScenes (Jam)'
2025-11-06 20:11:32.582 +01:00 [INF] Route matched with {action = "CreateQuestionScenes", controller = "StoryCreation", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateQuestionScenes(Jam.ViewModels.StoryCreation.CreateMultipleQuestionScenesViewModel, System.String) on controller Jam.Controllers.StoryCreationController (Jam).
2025-11-06 20:11:32.588 +01:00 [INF] Executing RedirectResult, redirecting to /StoryCreation/CreateEndingScenes.
2025-11-06 20:11:32.588 +01:00 [INF] Executed action Jam.Controllers.StoryCreationController.CreateQuestionScenes (Jam) in 5.9964ms
2025-11-06 20:11:32.588 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryCreationController.CreateQuestionScenes (Jam)'
2025-11-06 20:11:32.589 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7025/StoryCreation/CreateQuestionScenes - 302 0 null 17.0297ms
2025-11-06 20:11:32.617 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryCreation/CreateEndingScenes - null null
2025-11-06 20:11:32.618 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryCreationController.CreateEndingScenes (Jam)'
2025-11-06 20:11:32.620 +01:00 [INF] Route matched with {action = "CreateEndingScenes", controller = "StoryCreation", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateEndingScenes(System.Nullable`1[System.Int32]) on controller Jam.Controllers.StoryCreationController (Jam).
2025-11-06 20:11:32.622 +01:00 [INF] Executing ViewResult, running view CreateEndingScenes.
2025-11-06 20:11:32.660 +01:00 [INF] Executed ViewResult - view CreateEndingScenes executed in 16.597ms.
2025-11-06 20:11:32.661 +01:00 [INF] Executed action Jam.Controllers.StoryCreationController.CreateEndingScenes (Jam) in 40.958ms
2025-11-06 20:11:32.661 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryCreationController.CreateEndingScenes (Jam)'
2025-11-06 20:11:32.685 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryCreation/CreateEndingScenes - 200 null text/html; charset=utf-8 93.123ms
2025-11-06 20:11:35.456 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7025/StoryCreation/CreateEndingScenes - application/x-www-form-urlencoded 288
2025-11-06 20:11:35.458 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryCreationController.CreateEndingScenes (Jam)'
2025-11-06 20:11:35.462 +01:00 [INF] Route matched with {action = "CreateEndingScenes", controller = "StoryCreation", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateEndingScenes(Jam.ViewModels.EndingScenesViewModel, System.String) on controller Jam.Controllers.StoryCreationController (Jam).
2025-11-06 20:11:35.518 +01:00 [INF] Executing RedirectResult, redirecting to /.
2025-11-06 20:11:35.518 +01:00 [INF] Executed action Jam.Controllers.StoryCreationController.CreateEndingScenes (Jam) in 55.2902ms
2025-11-06 20:11:35.518 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryCreationController.CreateEndingScenes (Jam)'
2025-11-06 20:11:35.518 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7025/StoryCreation/CreateEndingScenes - 302 0 null 61.6428ms
2025-11-06 20:11:35.523 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/ - null null
2025-11-06 20:11:35.523 +01:00 [INF] Executing endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-06 20:11:35.523 +01:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller Jam.Controllers.HomeController (Jam).
2025-11-06 20:11:35.531 +01:00 [INF] Executing ViewResult, running view Index.
2025-11-06 20:11:35.584 +01:00 [INF] Executed ViewResult - view Index executed in 52.6038ms.
2025-11-06 20:11:35.584 +01:00 [INF] Executed action Jam.Controllers.HomeController.Index (Jam) in 60.7431ms
2025-11-06 20:11:35.584 +01:00 [INF] Executed endpoint 'Jam.Controllers.HomeController.Index (Jam)'
2025-11-06 20:11:35.585 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/ - 200 null text/html; charset=utf-8 62.3556ms
2025-11-06 20:11:37.647 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryManagement/StoryDetails?storyId=4 - null null
2025-11-06 20:11:37.792 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryManagementController.StoryDetails (Jam)'
2025-11-06 20:11:37.796 +01:00 [INF] Route matched with {action = "StoryDetails", controller = "StoryManagement", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StoryDetails(Int32) on controller Jam.Controllers.StoryManagementController (Jam).
2025-11-06 20:11:37.803 +01:00 [INF] Executing ViewResult, running view StoryDetails.
2025-11-06 20:11:37.809 +01:00 [INF] Executed ViewResult - view StoryDetails executed in 6.5429ms.
2025-11-06 20:11:37.886 +01:00 [INF] Executed action Jam.Controllers.StoryManagementController.StoryDetails (Jam) in 88.8812ms
2025-11-06 20:11:37.907 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryManagementController.StoryDetails (Jam)'
2025-11-06 20:11:37.908 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryManagement/StoryDetails?storyId=4 - 200 null text/html; charset=utf-8 261.3343ms
2025-11-06 20:11:39.611 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditStory?storyId=4 - null null
2025-11-06 20:11:39.612 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditStory (Jam)'
2025-11-06 20:11:39.612 +01:00 [INF] Route matched with {action = "EditStory", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditStory(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-06 20:11:39.620 +01:00 [INF] Executing ViewResult, running view EditStory.
2025-11-06 20:11:39.650 +01:00 [INF] Executed ViewResult - view EditStory executed in 4.6192ms.
2025-11-06 20:11:39.652 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditStory (Jam) in 38.741ms
2025-11-06 20:11:39.698 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditStory (Jam)'
2025-11-06 20:11:39.699 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditStory?storyId=4 - 200 null text/html; charset=utf-8 87.9626ms
2025-11-06 20:11:42.271 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=4 - null null
2025-11-06 20:11:42.273 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-06 20:11:42.274 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-06 20:11:42.283 +01:00 [INF] Executing ViewResult, running view EditQuestionScenes.
2025-11-06 20:11:42.378 +01:00 [INF] Executed ViewResult - view EditQuestionScenes executed in 74.5478ms.
2025-11-06 20:11:42.404 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 130.3846ms
2025-11-06 20:11:42.430 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-06 20:11:42.430 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=4 - 200 null text/html; charset=utf-8 159.785ms
2025-11-06 20:11:44.360 +01:00 [INF] Request starting HTTP/2 POST https://localhost:7025/StoryEditing/DeleteQuestion?storyId=4&questionSceneId=6 - application/x-www-form-urlencoded 225
2025-11-06 20:11:44.361 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.DeleteQuestion (Jam)'
2025-11-06 20:11:44.361 +01:00 [INF] Route matched with {action = "DeleteQuestion", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteQuestion(Int32, Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-06 20:11:44.382 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'Jam.DAL.StoryDbContext'.
System.InvalidOperationException: Unable to save changes because a circular dependency was detected in the data to be saved: 'QuestionScene [Modified] ForeignKeyConstraint { 'NextQuestionSceneId' } <-
QuestionScene [Deleted] Index { 'NextQuestionSceneId' } <-
QuestionScene [Modified]To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.'.
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.ThrowCycle(List`1 cycle, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.TopologicalSortCore(Boolean withBatching, Func`4 canBreakEdges, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.BatchingTopologicalSort(Func`4 canBreakEdges, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.TopologicalSort(IEnumerable`1 commands)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.BatchCommands(IList`1 entries, IUpdateAdapter updateAdapter)+MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: Unable to save changes because a circular dependency was detected in the data to be saved: 'QuestionScene [Modified] ForeignKeyConstraint { 'NextQuestionSceneId' } <-
QuestionScene [Deleted] Index { 'NextQuestionSceneId' } <-
QuestionScene [Modified]To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.'.
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.ThrowCycle(List`1 cycle, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.TopologicalSortCore(Boolean withBatching, Func`4 canBreakEdges, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.BatchingTopologicalSort(Func`4 canBreakEdges, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.TopologicalSort(IEnumerable`1 commands)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.BatchCommands(IList`1 entries, IUpdateAdapter updateAdapter)+MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-06 20:11:44.429 +01:00 [ERR] [SceneRepository -> DeleteQuestionScene] Error deleting scene 6
System.InvalidOperationException: Unable to save changes because a circular dependency was detected in the data to be saved: 'QuestionScene [Modified] ForeignKeyConstraint { 'NextQuestionSceneId' } <-
QuestionScene [Deleted] Index { 'NextQuestionSceneId' } <-
QuestionScene [Modified]To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.'.
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.ThrowCycle(List`1 cycle, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.TopologicalSortCore(Boolean withBatching, Func`4 canBreakEdges, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Utilities.Multigraph`2.BatchingTopologicalSort(Func`4 canBreakEdges, Func`2 formatCycle, Func`2 formatException)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.TopologicalSort(IEnumerable`1 commands)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.BatchCommands(IList`1 entries, IUpdateAdapter updateAdapter)+MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Jam.DAL.SceneDAL.SceneRepository.DeleteQuestionScene(Int32 questionSceneId, Nullable`1 previousSceneId) in /Users/jaraazad/Desktop/Jam/DAL/SceneDAL/SceneRepository.cs:line 452
2025-11-06 20:11:44.430 +01:00 [INF] Executing RedirectResult, redirecting to /StoryEditing/EditQuestionScenes?storyId=4.
2025-11-06 20:11:44.430 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.DeleteQuestion (Jam) in 68.9744ms
2025-11-06 20:11:44.430 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.DeleteQuestion (Jam)'
2025-11-06 20:11:44.430 +01:00 [INF] Request finished HTTP/2 POST https://localhost:7025/StoryEditing/DeleteQuestion?storyId=4&questionSceneId=6 - 302 0 null 70.4493ms
2025-11-06 20:11:44.486 +01:00 [INF] Request starting HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=4 - null null
2025-11-06 20:11:44.487 +01:00 [INF] Executing endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-06 20:11:44.487 +01:00 [INF] Route matched with {action = "EditQuestionScenes", controller = "StoryEditing", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EditQuestionScenes(Int32) on controller Jam.Controllers.StoryEditingController (Jam).
2025-11-06 20:11:44.490 +01:00 [INF] Executing ViewResult, running view EditQuestionScenes.
2025-11-06 20:11:44.527 +01:00 [INF] Executed ViewResult - view EditQuestionScenes executed in 36.5589ms.
2025-11-06 20:11:44.556 +01:00 [INF] Executed action Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam) in 69.312ms
2025-11-06 20:11:44.557 +01:00 [INF] Executed endpoint 'Jam.Controllers.StoryEditingController.EditQuestionScenes (Jam)'
2025-11-06 20:11:44.557 +01:00 [INF] Request finished HTTP/2 GET https://localhost:7025/StoryEditing/EditQuestionScenes?storyId=4 - 200 null text/html; charset=utf-8 71.2414ms
